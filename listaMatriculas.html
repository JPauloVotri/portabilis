<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Listagem de Matriculas</title>
</head>

<body>
<?php

function getdb() {
	$db = pg_connect("host=localhost port=5432 dbname=postgres user=jpaulo password=8815") or die('connection failed');
	return $db;
}

$result = pg_exec(getdb(), "select * from matricula where ativo=1");
$numrows = pg_numrows($result);

?>

<table border="1">
<tr>
	<th>ID da Matrícula</th>
	<th>ID do Aluno</th>
	<th>ID do Curso</th>
	<th>Data da Matrícula</th>
	<th>Ano</th>
	<th>Pago?</th>
</tr>

<?php

for($i = 0; $i < $numrows; $i++) {
	echo "<tr>";
	$row = pg_fetch_array($result, $i);
	echo "<td>".$row['id']."</td>
		<td>$row['aluno_id']</td>
		<td>$row['curso_id']</td>
		<td>$row['data_matricula']</td>
		<td>$row['ano']</td>
		<td>($row['pago'] == 1) ? 'Sim' : 'Não'</td>
	</tr>";
}
pg_close(getdb());

?>
</body>
